<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>贪吃蛇 | 我的作品集</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #111827;
            font-family: Arial, sans-serif;
        }

        .game-container {
            position: relative;
        }

        canvas {
            border: 2px solid #fbbf24;
            background-color: #1f2937;
        }

        .score {
            color: #fbbf24;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ef4444;
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
            display: none;
        }

        .tips {
            color: #94a3b8;
            font-size: 14px;
            margin-top: 10px;
            /* 仅在原有tips里补充E/Q说明，无其他样式修改 */
        }

        /* 仅新增暂停提示样式，不修改任何原有样式 */
        .game-pause {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fbbf24;
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
            display: none;
            z-index: 9;
        }

        /* 仅新增开始提示样式，不修改任何原有样式 */
        .game-start {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fbbf24;
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
            display: block;
            z-index: 9;
        }
    </style>
</head>

<body>
    <div class="score">Score: 0</div>
    <div class="game-container">
        <div class="game-over">Game Over</div>
        <!-- 仅新增开始、暂停提示标签，无其他DOM修改 -->
        <div class="game-start">Press E Start</div>
        <div class="game-pause">Paused</div>
        <canvas id="snakeCanvas" width="800" height="800"></canvas>
    </div>
    <!-- 仅在原有tips里补充E/Q操作，无其他文字修改 -->
    <div class="tips">操作说明：方向键 ↑↓←→ 控制蛇移动，吃到绿色食物加分，碰到自身游戏结束 | E开始/重玩 | Q暂停/继续</div>

    <script>
        // 初始化核心参数（完全保留原始代码，无任何修改）
        const canvas = document.getElementById('snakeCanvas');
        const ctx = canvas.getContext('2d');
        let direction = 'up';
        let snake = [
            { x: 400, y: 400 }
        ];
        const gridSize = 20;
        const speed = 100;
        let food = {};
        let score = 0;
        let gameOver = false;
        let gameLoopInterval;

        // 仅新增3个暂停/开始控制变量，无其他变量新增
        let isPaused = false; // 是否暂停
        const gameOverEl = document.querySelector('.game-over');
        const gamePauseEl = document.querySelector('.game-pause');
        const gameStartEl = document.querySelector('.game-start');

        // 1. 生成随机食物（完全保留原始代码，无任何修改）
        function generateFood() {
            let foodX, foodY;
            do {
                foodX = Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize;
                foodY = Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize;
            } while (snake.some(segment => segment.x === foodX && segment.y === foodY));
            food = { x: foodX, y: foodY };
        }

        // 2. 方向键控制（完全保留原始代码，仅在最后追加E/Q按键逻辑）
        document.addEventListener('keydown', (e) => {
            if (gameOver) return;
            switch (e.key) {
                case 'ArrowUp':
                    if (direction !== 'down') direction = 'up';
                    break;
                case 'ArrowDown':
                    if (direction !== 'up') direction = 'down';
                    break;
                case 'ArrowLeft':
                    if (direction !== 'right') direction = 'left';
                    break;
                case 'ArrowRight':
                    if (direction !== 'left') direction = 'right';
                    break;
                // 仅追加E/Q按键逻辑，无任何原有case修改
                case 'e':
                case 'E':
                    initGame(); // E键：开始/重新开始
                    break;
                case 'q':
                case 'Q':
                    togglePause(); // Q键：暂停/继续
                    break;
            }
        });

        // 3. 移动蛇身（完全保留原始代码，仅加一行暂停判断）
        function moveSnake() {
            if (gameOver || isPaused) return; // 仅加暂停判断，无其他修改
            const head = { ...snake[0] };
            switch (direction) {
                case 'up':
                    head.y -= gridSize;
                    break;
                case 'down':
                    head.y += gridSize;
                    break;
                case 'left':
                    head.x -= gridSize;
                    break;
                case 'right':
                    head.x += gridSize;
                    break;
            }
            if (head.x < 0) head.x = canvas.width - gridSize;
            if (head.x >= canvas.width) head.x = 0;
            if (head.y < 0) head.y = canvas.height - gridSize;
            if (head.y >= canvas.height) head.y = 0;
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.querySelector('.score').textContent = `Score: ${score}`;
                generateFood();
            } else {
                snake.pop();
            }
            if (snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)) {
                gameOver = true;
                gameOverEl.style.display = 'block';
                clearInterval(gameLoopInterval);
            }
        }

        // 4. 绘制游戏画面（完全保留原始代码，无任何修改）
        function draw() {
            ctx.fillStyle = '#1f2937';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#22c55e';
            ctx.fillRect(food.x, food.y, gridSize - 1, gridSize - 1);
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#ef4444' : '#f87171';
                ctx.fillRect(segment.x, segment.y, gridSize - 1, gridSize - 1);
            });
        }

        // 5. 初始化游戏（完全保留原始代码，仅追加暂停/提示的状态重置）
        function initGame() {
            // 原始重置代码，无任何修改
            snake = [{ x: 400, y: 400 }];
            direction = 'up';
            score = 0;
            gameOver = false;
            document.querySelector('.score').textContent = 'Score: 0';
            gameOverEl.style.display = 'none';
            generateFood();
            clearInterval(gameLoopInterval);
            gameLoopInterval = setInterval(() => {
                moveSnake();
                draw();
            }, speed);
            // 仅追加：重置暂停状态+隐藏开始/暂停提示
            isPaused = false;
            gameStartEl.style.display = 'none';
            gamePauseEl.style.display = 'none';
        }

        // 仅新增：暂停/继续切换函数，无其他新增逻辑
        function togglePause() {
            if (gameOver) return; // 游戏结束时不响应暂停
            isPaused = !isPaused;
            if (isPaused) {
                gamePauseEl.style.display = 'block'; // 显示暂停提示
            } else {
                gamePauseEl.style.display = 'none'; // 隐藏暂停提示
            }
        }

        // 原始代码：启动游戏（注释掉，改为按E启动）
        // initGame();
    </script>
</body>

</html>